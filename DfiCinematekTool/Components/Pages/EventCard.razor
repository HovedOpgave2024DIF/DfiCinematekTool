<RadzenRow Gap="0" class="rz-mb-12 rz-mx-auto rz-border-radius-2 rz-shadow-4" Style="max-width: 1400px; overflow: hidden; background: var(--rz-secondary-light) no-repeat 60% 90% fixed url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwNCIgaGVpZ2h0PSIxNDU4IiB2aWV3Qm94PSIwIDAgMTIwNCAxNDU4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBvcGFjaXR5PSIwLjUiIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2ZfNDkzXzEwMTM0KSI+CjxjaXJjbGUgY3g9IjcyMi4xMjgiIGN5PSI4MzkuMDIiIHI9IjQ4MS40MTkiIGZpbGw9InVybCgjcGFpbnQwX3JhZGlhbF80OTNfMTAxMzQpIi8+CjwvZz4KPGcgb3BhY2l0eT0iMC41IiBmaWx0ZXI9InVybCgjZmlsdGVyMV9mXzQ5M18xMDEzNCkiPgo8Y2lyY2xlIGN4PSI0NzAuMzMzIiBjeT0iNTcwLjMzMyIgcj0iNDcwLjMzMyIgZmlsbD0idXJsKCNwYWludDFfcmFkaWFsXzQ5M18xMDEzNCkiLz4KPC9nPgo8ZyBvcGFjaXR5PSIwLjUiIGZpbHRlcj0idXJsKCNmaWx0ZXIyX2ZfNDkzXzEwMTM0KSI+CjxjaXJjbGUgY3g9IjY5MS41MTEiIGN5PSI1MjIuMjk3IiByPSIzMzEuNTAzIiBmaWxsPSJ1cmwoI3BhaW50Ml9yYWRpYWxfNDkzXzEwMTM0KSIvPgo8L2c+CjxnIG9wYWNpdHk9IjAuNSIgZmlsdGVyPSJ1cmwoI2ZpbHRlcjNfZl80OTNfMTAxMzQpIj4KPGNpcmNsZSBjeD0iNjA4LjI0NCIgY3k9IjEwNzkuOTciIHI9IjMzMS41MDMiIHRyYW5zZm9ybT0icm90YXRlKC04MS4yMjQ0IDYwOC4yNDQgMTA3OS45NykiIGZpbGw9InVybCgjcGFpbnQzX3JhZGlhbF80OTNfMTAxMzQpIi8+CjwvZz4KPGRlZnM+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZl80OTNfMTAxMzQiIHg9IjE0MC43MDkiIHk9IjI1Ny42MDEiIHdpZHRoPSIxMTYyLjg0IiBoZWlnaHQ9IjExNjIuODQiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNTAiIHJlc3VsdD0iZWZmZWN0MV9mb3JlZ3JvdW5kQmx1cl80OTNfMTAxMzQiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjFfZl80OTNfMTAxMzQiIHg9Ii0xMDAiIHk9IjAiIHdpZHRoPSIxMTQwLjY3IiBoZWlnaHQ9IjExNDAuNjciIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNTAiIHJlc3VsdD0iZWZmZWN0MV9mb3JlZ3JvdW5kQmx1cl80OTNfMTAxMzQiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjJfZl80OTNfMTAxMzQiIHg9IjI2MC4wMDgiIHk9IjkwLjc5MzkiIHdpZHRoPSI4NjMuMDA2IiBoZWlnaHQ9Ijg2My4wMDYiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNTAiIHJlc3VsdD0iZWZmZWN0MV9mb3JlZ3JvdW5kQmx1cl80OTNfMTAxMzQiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjNfZl80OTNfMTAxMzQiIHg9IjE3Ni42OTQiIHk9IjY0OC40MjMiIHdpZHRoPSI4NjMuMSIgaGVpZ2h0PSI4NjMuMSIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJzaGFwZSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSI1MCIgcmVzdWx0PSJlZmZlY3QxX2ZvcmVncm91bmRCbHVyXzQ5M18xMDEzNCIvPgo8L2ZpbHRlcj4KPHJhZGlhbEdyYWRpZW50IGlkPSJwYWludDBfcmFkaWFsXzQ5M18xMDEzNCIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSg3MjIuMTI4IDgzOS4wMikgcm90YXRlKDkwKSBzY2FsZSg0ODEuNDE5KSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRjFBNkMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkYxQTZDIiBzdG9wLW9wYWNpdHk9IjAiLz4KPC9yYWRpYWxHcmFkaWVudD4KPHJhZGlhbEdyYWRpZW50IGlkPSJwYWludDFfcmFkaWFsXzQ5M18xMDEzNCIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSg0NzAuMzMzIDU3MC4zMzMpIHJvdGF0ZSg5MCkgc2NhbGUoNDcwLjMzMykiPgo8c3RvcCBzdG9wLWNvbG9yPSIjM0FBQ0ZGIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzNBOTVGRiIgc3RvcC1vcGFjaXR5PSIwIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQyX3JhZGlhbF80OTNfMTAxMzQiIGN4PSIwIiBjeT0iMCIgcj0iMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjkxLjUxMSA1MjIuMjk3KSByb3RhdGUoOTApIHNjYWxlKDMzMS41MDMpIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzQ4M0FGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0ODNBRkYiIHN0b3Atb3BhY2l0eT0iMCIvPgo8L3JhZGlhbEdyYWRpZW50Pgo8cmFkaWFsR3JhZGllbnQgaWQ9InBhaW50M19yYWRpYWxfNDkzXzEwMTM0IiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDYwOC4yNDQgMTA3OS45Nykgcm90YXRlKDkwKSBzY2FsZSgzMzEuNTAzKSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRkM4M0EiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkZDODNBIiBzdG9wLW9wYWNpdHk9IjAiLz4KPC9yYWRpYWxHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K')">
	<RadzenColumn Size="12" SizeMD="2" >

		<RadzenCard class="rz-shadow-0 rz-border-radius-0 rz-text-align-left rz-p-5" Style="height: 100%; opacity: 95%; border-right: 1px solid lightgrey;">

			<RadzenText class="rz-color-grey rz-mb-4" Style="font-size: 1rem; border-bottom: 1px solid lightgrey; padding-bottom: 11px">
				@($"{EventFilmStatus.currentEvent.Date:dddd dd/MM/yyyy}")
			</RadzenText>

			<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-mt-5 rz-ml-2">
				<strong style="padding-right: 5px; display: block;">Title:</strong> 
				@($"{EventFilmStatus.currentEvent.Title}")
			</RadzenText>

			<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-mt-4 rz-ml-2">
				<strong style="padding-right: 5px; display: block;">Tidspunkt:</strong> 
				@($"{EventFilmStatus.currentEvent.Date:HH:mm}")
			</RadzenText>

			<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-mt-4 rz-ml-2">
				<strong style="padding-right: 5px; display: block;">Lærred:</strong> 
				@($"{EventFilmStatus.currentEvent.Screen}")
			</RadzenText>

			<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-mt-4 rz-ml-2">
				<strong style="padding-right: 5px; display: block;">Varighed:</strong>
				@($"{EventFilmStatus.currentEvent.DurationInMinutes} minuter")
			</RadzenText>

			<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-mt-4 rz-ml-2">
				<strong style="padding-right: 5px; display: block;">Ejer:</strong> 
				@($"{EventFilmStatus.currentEvent.Owner}")
			</RadzenText>

			<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-mt-4 rz-ml-2">
				<strong style="padding-right: 5px; display: block;">Eventtype:</strong> 
				@($"{EventFilmStatus.currentEvent.EventType}")
			</RadzenText>

			<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-mt-4 rz-ml-2">
				<strong style="padding-right: 5px; display: block;">Tagbio:</strong> 
				@($"{(EventFilmStatus.currentEvent.IsRooftop == false ? "Nej" : "Ja")}")
			</RadzenText>

		</RadzenCard>

	</RadzenColumn>

	<RadzenColumn Size="12" SizeMD="3">

		<RadzenCard class="rz-shadow-0 rz-border-radius-0 rz-text-align-left rz-p-5" Style="height: 100%; opacity: 95%;">

			<RadzenRow class="rz-mb-4" Style="border-bottom: 1px solid lightgrey; padding-bottom: 11px">
				<RadzenText class="rz-color-grey" Style="font-size: 1rem">
					Filmvisninger (minutter)
				</RadzenText>
			</RadzenRow>

			@if (EventFilmStatus.currentEvent?.Films?.Count > 0)
			{
				<RadzenStack Gap="2.3rem">
					@foreach (var film in EventFilmStatus.currentEvent.Films ?? [])
					{
						<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-ml-2">
							<strong style="margin-right: 10px">@($"{film.Title}")</strong> @($"({film.DurationInMinutes})")
						</RadzenText>
					}
				</RadzenStack>
			}
			else
			{
				<div style="display: flex; justify-content: center; align-items: center; text-align: center; width: 100%; height: 92%;">
					<RadzenText class="rz-color-warning rz-mt-2 rz-ml-2" Style="font-size: 1rem;">
						Tilføj film...
					</RadzenText>
				</div>
			}

		</RadzenCard>

	</RadzenColumn>

	<RadzenColumn Size="12" SizeMD="1">

		<RadzenCard class="rz-shadow-0 rz-border-radius-0 rz-text-align-left rz-p-5" Style="height: 100%; opacity: 95%; border-right: 1px solid lightgrey;">

			<RadzenRow class="rz-mb-4" Style="border-bottom: 1px solid lightgrey; padding-bottom: 11px">
				<RadzenText class="rz-color-grey" Style="font-size: 1rem">
					Format
				</RadzenText>
			</RadzenRow>

			<RadzenStack Gap="2.3rem">
				@foreach (var film in EventFilmStatus.currentEvent.Films ?? [])
				{
					<RadzenText TextStyle="TextStyle.Body2" class="rz-color-grey rz-ml-2">
						@($"{film.Format}")
					</RadzenText>
				}
			</RadzenStack>

		</RadzenCard>

	</RadzenColumn>

	<RadzenColumn Size="12" SizeMD="6">

		<RadzenCard class="rz-shadow-0 rz-border-radius-0 rz-text-align-left rz-p-5" Style="height: 100%; opacity: 95%;">

			@if (EventFilmStatus.FilmStatuses.Count > 0) 
			{
				<RadzenRow Style="overflow-x: auto; overflow-y: hidden; white-space:nowrap; padding-bottom: 50px;">
					<RadzenRow Gap="1.2rem" Style="display: flex; flex-wrap: nowrap; align-items: center; border-bottom: 1px solid lightgrey; padding-bottom: 10px;">
						<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 0px;">
							Nøglefri
						</RadzenText>
						<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 82px;">
							Bestilt
						</RadzenText>
						<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 64px;">
							Modtaget
						</RadzenText>
						<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 66px;">
							Klargjort
						</RadzenText>
						<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 72px;">
							Ok
						</RadzenText>
						<RadzenText class="rz-color-grey" Style="margin-right: 90px;">
							Kommentar
						</RadzenText>
						<RadzenText Style="font-size: 1rem; margin-right: 20px;">
							<DeleteEventDialog EventId="EventFilmStatus.currentEvent.Id" DialogConformation="HandleDeleteConfirmamtion" />
						</RadzenText>

					</RadzenRow>

					@foreach (var eventFilmStatus in EventFilmStatus.FilmStatuses ?? [])
					{
						<UpdateFilmStatusForm FilmStatus="@eventFilmStatus" OnValidFilmStatusSumbit="HandleFilStatusUpdate" />
					}
				</RadzenRow>
			}
			else
			{
				<RadzenRow Gap="1.1rem" Style="display: flex; flex-wrap: nowrap; align-items: center; border-bottom: 1px solid lightgrey; padding-bottom: 11px;">
					<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 0px;">
						Nøglefri
					</RadzenText>
					<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 0px;">
						Bestilt
					</RadzenText>
					<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 0px;">
						Modtaget
					</RadzenText>
					<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 0px;">
						Klargjort
					</RadzenText>
					<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 0px;">
						Ok
					</RadzenText>
					<RadzenText class="rz-color-grey" Style="font-size: 1rem; margin-right: 0px;">
						Kommentar
					</RadzenText>

					<RadzenText Style="font-size: 1rem; margin-right: 20px;">
						<DeleteEventDialog EventId="EventFilmStatus.currentEvent.Id" DialogConformation="HandleDeleteConfirmamtion" />
					</RadzenText>
				</RadzenRow>

				<div style="display: flex; justify-content: center; align-items: center; text-align: center; width: 100%; height: 100%;">
					<RadzenText class="rz-color-warning rz-mt-2 rz-ml-2" Style="font-size: 1rem;">
						Tilføj film...
					</RadzenText>
				</div>
			}
		</RadzenCard>

	</RadzenColumn>
</RadzenRow>

@code {
	[Parameter]
	public (Event currentEvent, List<FilmStatus> FilmStatuses) EventFilmStatus { get; set; }

	[Parameter]
	public EventCallback<FilmStatus> OnUpdateFilmStatus { get; set; }

	[Parameter]
	public EventCallback<(bool confirmation, int eventId)> DeleteConfirmation { get; set; }

	private async Task HandleFilStatusUpdate(FilmStatus filmStatus) {
		await OnUpdateFilmStatus.InvokeAsync(filmStatus);
	}

	private async Task HandleDeleteConfirmamtion((bool confirmation, int eventId) result) {
		await DeleteConfirmation.InvokeAsync((confirmation: result.confirmation, eventId: result.eventId));
	}
}

